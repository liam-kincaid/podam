<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 29-07-2023 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Podam - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20230729" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                podam
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="projectVersion">Version: 8.0.0.RELEASE</span>
              </div>
            <div class="xright">                    <a href="https://github.com/mtedone/podam" class="externalLink" target="_blank" title="Podam @ GitHub">Podam @ GitHub</a>
            |
                        <a href="http://groups.google.com/group/podam" class="externalLink" target="_blank" title="PODAM Google Group">PODAM Google Group</a>
            |
                        <a href="https://www.linkedin.com/in/marco-tedone-a874b0127" class="externalLink" target="_blank" title="LinkedIn profile">LinkedIn profile</a>
            |
                        <a href="https://twitter.com/#!/marcotedone" class="externalLink" target="_blank" title="Follow Me on Twitter">Follow Me on Twitter</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Getting Started</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="downloads.html" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="usage.html" title="Usage">Usage</a>
            </li>
                  <li class="none">
                          <a href="how-to-contribute.html" title="How to contribute">How to contribute</a>
            </li>
                  <li class="none">
                          <a href="sponsors/sponsors.html" title="Sponsors">Sponsors</a>
            </li>
          </ul>
                       <h5>Technical Reference</h5>
                  <ul>
                  <li class="none">
                          <a href="uml/architecture.html" title="Architecture">Architecture</a>
            </li>
                  <li class="none">
                          <a href="annotations.html" title="Custom Annotations">Custom Annotations</a>
            </li>
                  <li class="none">
                          <a href="validation-api.html" title="Bean Validation Support">Bean Validation Support</a>
            </li>
                  <li class="none">
                          <a href="walk-through-example.html" title="A Walk-through example">A Walk-through example</a>
            </li>
                  <li class="none">
            <strong>Corner Cases</strong>
          </li>
                  <li class="none">
                          <a href="faqs.html" title="FAQS">FAQS</a>
            </li>
                  <li class="none">
                          <a href="serenity/index.html" title="Serenity BDD Reports">Serenity BDD Reports</a>
            </li>
                  <li class="none">
                          <a href="release-notes/release-notes.html" title="Release Notes">Release Notes</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                              <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                                     <a href="http://www.jemos.co.uk/projects/podam/index.html" title="Jemos" class="poweredBy">
        <img class="poweredBy"  alt="Jemos Podam" src="images/logo.gif"     />
      </a>
                       
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>Corner Cases<a name="Corner_Cases"></a></h2>
<p>In the <a href="./walk-through-example.html"> Walk-through page</a> we documented the most common scenarios where you would want to use PODAM. These include: </p>
<ul>
<li>Normal one-level POJO</li>
<li>(Complex) graph of POJOs</li>
<li>Immutable-like POJOs </li></ul>
<p>In this page I will show how PODAM handles some corner cases, such as: </p>
<ul>
<li>Inheritance (e.g. when a POJO extends a class, either abstract or non-abstract)</li>
<li>Singleton-like classes (e.g. when a public, no-arg constructor is not present but a series of static factory methods exist (such as getInstance())</li></ul></div>
<div class="section">
<h2>Inheritance<a name="Inheritance"></a></h2>
<p>PODAM supports inheritance. It will fill parent attributes if an accessible setter is available to the POJOs which you are filling with data. </p>
<div class="section">
<h3>Example <a name="Example"></a></h3>
<p>The following example illustrates a parent class, <i>uk.co.jemos.podam.test.dto.AbstractOneDimensionalPojo</i> which is extended by another POJO, <i>uk.co.jemos.podam.test.dto.OneDimensionalChildPojo</i>. </p>
<div class="source">
<pre>/**
 * 
 */
package uk.co.jemos.podam.test.dto;

import java.util.Calendar;

import uk.co.jemos.podam.annotations.PodamIntValue;

/**
 * Abstract POJO to test inheritance.
 * 
 * @author mtedone
 * 
 */
public abstract class AbstractOneDimensionalPojo {

        @PodamIntValue(maxValue = 10)
        private int parentIntField;
        
        private Calendar parentCalendarField;
        
        public int getParentIntField() {
                return parentIntField;
        }

        protected void setParentIntField(int parentIntField) {
                this.parentIntField = parentIntField;
        }
        
        public Calendar getParentCalendarField() {
                return parentCalendarField;
        }
        
        protected void setParentCalendarField(Calendar parentCalendarField) {
                this.parentCalendarField = parentCalendarField;
        }

        @Override
        public String toString() {
                final String TAB = &quot;    &quot;;

                StringBuilder retValue = new StringBuilder();

                retValue.append(&quot;AbstractOneDimensionalPojo ( &quot;)
                                .append(&quot;parentIntField = &quot;).append(parentIntField).append(TAB)
                                .append(&quot;parentCalendarField = &quot;).append(parentCalendarField.getTime())
                                .append(TAB).append(&quot; )&quot;);

                return retValue.toString();
        }
}

</pre></div>
<p>The class above defines two private attributes, <i>parentIntField</i> and <i>parentCalendarField</i>. It also provides two protected setters which are available to sub-classes. The presence of accessible setter methods is a pre-requisite for this inheritance to be handled properly by PODAM.</p>
<p>This is the child class: </p>
<div class="source">
<pre>
/**
 * 
 */
package uk.co.jemos.podam.test.dto;

/**
 * A child class to test inheritance
 * @author mtedone
 * 
 */
public class OneDimensionalChildPojo extends AbstractOneDimensionalPojo {
        
        private int intField;
        
        private String strField;        

        public OneDimensionalChildPojo() {
                super();
        }

        public int getIntField() {
                return intField;
        }

        public void setIntField(int intField) {
                this.intField = intField;
        }

        public String getStrField() {
                return strField;
        }

        public void setStrField(String strField) {
                this.strField = strField;
        }

        /**
         * Constructs a &lt;code&gt;String&lt;/code&gt; with all attributes in name = value
         * format.
         * 
         * @return a &lt;code&gt;String&lt;/code&gt; representation of this object.
         */
        @Override
        public String toString() {
                final String TAB = &quot;    &quot;;

                StringBuilder retValue = new StringBuilder();
                retValue.append(super.toString()).append(TAB);

                retValue.append(&quot;OneDimensionalChildPojo ( &quot;).append(&quot;intField = &quot;)
                                .append(intField).append(TAB).append(&quot;strField = &quot;)
                                .append(strField).append(TAB).append(&quot; )&quot;);

                return retValue.toString();
        }       

}


</pre></div>
<p>Running PODAM on the OneDimensionalChildPojo class will produce the following <i>toString()</i> result: </p>
<div class="source">
<pre>AbstractOneDimensionalPojo ( parentIntField = 3    parentCalendarField = Sat Apr 30 13:49:49 BST 2011     )    
  OneDimensionalChildPojo ( intField = -516418302    strField = &#xfd96;&#x85fe;&#x518b;&#x836c;&#x99ab;&#xcf48;&#x6101;&#x3d7c;&#x85d9;&#x916c;     )
</pre></div>
<p>As you can see Podam has set both the parent attributes values. </p></div></div>
<div class="section">
<h2>Singleton-like classes<a name="Singleton-like_classes"></a></h2>
<p>A Singleton is a class which provides only an instance of itself. One of the implementation details of a Singleton is that, unless one used an Enum, the class should forbid clients from creating new instances. This is typically achieved by declaring the constructor private and by providing a public static method (e.g. getInstance()) which returns a singleton instance of the class. </p>
<p>PODAM handles Singleton-like classes, as the following example demonstrates: </p>
<div class="section">
<h3>Example<a name="Example"></a></h3>
<div class="source">
<pre>/**
 * 
 */
package uk.co.jemos.podam.test.dto;

import java.io.Serializable;
import java.util.Calendar;
import java.util.List;
import java.util.Map;

/**
 * A POJO to test a Singleton-like scenario where the public static Singleton
 * method contains parameters.
 * 
 * @author mtedone
 * 
 */
public class SingletonWithParametersInStaticFactoryPojo implements Serializable {       

        private static final long serialVersionUID = 1L;        

        private final Calendar createDate;

        private final List&lt;OneDimensionalTestPojo&gt; pojoList;

        private final Map&lt;String, OneDimensionalTestPojo&gt; pojoMap;

        private final String firstName;

        private static SingletonWithParametersInStaticFactoryPojo singleton;

        // -------------------&gt;&gt; Constructors

        /**
         * A private constructor to enforce the Singleton pattern
         * 
         * @param createDate
         *            The creation date
         * @param pojoList
         *            A list
         * @param pojoMap
         *            A map
         * @param firstName
         *            The first name
         */
        private SingletonWithParametersInStaticFactoryPojo(Calendar createDate,
                        List&lt;OneDimensionalTestPojo&gt; pojoList,
                        Map&lt;String, OneDimensionalTestPojo&gt; pojoMap, String firstName) {
                super();
                this.createDate = createDate;
                this.pojoList = pojoList;
                this.pojoMap = pojoMap;
                this.firstName = firstName;
        }
        

        /**
         * Singleton method
         * 
         * @param createDate
         *            The creation date
         * @param pojoList
         *            A list
         * @param pojoMap
         *            A map
         * @param firstName
         *            The first name
         * @return a singleton instance of this class
         */
        public static SingletonWithParametersInStaticFactoryPojo getInstance(
                        Calendar createDate, List&lt;OneDimensionalTestPojo&gt; pojoList,
                        Map&lt;String, OneDimensionalTestPojo&gt; pojoMap, String firstName) {
                if (null == singleton) {
                        singleton = new SingletonWithParametersInStaticFactoryPojo(
                                        createDate, pojoList, pojoMap, firstName);
                }

                return singleton;
        }
        
        public Calendar getCreateDate() {
                return createDate;
        }

        public List&lt;OneDimensionalTestPojo&gt; getPojoList() {
                return pojoList;
        }

        public Map&lt;String, OneDimensionalTestPojo&gt; getPojoMap() {
                return pojoMap;
        }

        public String getFirstName() {
                return firstName;
        }

}

</pre></div>
<p>The class above shows an interesting scenario: a Singleton-like class with the Singleton method which accepts parameters. To make the example even more palatable, some arguments are container-like (collections, maps). </p>
<p>Running the test on the class above produces the following result:</p>
<div class="source">
<pre>SingletonWithParametersInStaticFactoryPojo ( 
        createDate = Sat Apr 30 14:05:21 BST 2011    
        pojoList = [
                OneDimensionalTestPojo ( booleanField = true    booleanObjectField = true    byteField = 116    
                                                                 byteObjectField = 10    shortField = 77    shortObjectField = 4    charField = &#x3418;    
                                                                 charObjectField = &#xaa81;    intField = 1339494839    intObjectField = 980291811    
                                                                 longField = -3119222069530856219    longObjectField = 4260197822662475631    
                                                                 floatField = 0.24369287    floatObjectField = 0.7073253    doubleField = 0.7151146071422815    
                                                                 doubleObjectField = 0.8253745751884359    stringField = &#xc60;&#x1bb7;&#x1cc3;&#x2538;&#x3bea;&#xcb75;&#x1ffa;&#xc3e;&#xa390;&#x11ab;    
                                                                 objectField = java.lang.Object@57a7ddcf    calendarField = Sat Apr 30 14:05:21 BST 2011    
                                                                 dateField = Sat Apr 30 14:05:21 BST 2011    randomArray = [Ljava.util.Random;@4dd36dfe     )]    
        pojoMap = {
                &#x7814;&#x4de2;&#xcad7;&#xf715;&#x36d7;&#xe1;&#xb8f8;&#xa067;&#x255d;&#x696b;=OneDimensionalTestPojo ( booleanField = false    booleanObjectField = true    byteField = 8    
                                                                                                byteObjectField = 39    shortField = 17    shortObjectField = 24    
                                                                                                charField = &#xb070;    charObjectField = &#xbfe9;    intField = 1412793167    
                                                                                                intObjectField = -1521479114    longField = -5054977360881301041    
                                                                                                longObjectField = 8252315121779248953    floatField = 0.13922673    
                                                                                                floatObjectField = 0.6835188    doubleField = 0.7345653869074095    
                                                                                                doubleObjectField = 0.7172732709165366    
                                                                                                stringField = &#x82f1;&#x8a06;&#xe24;&#xbb67;&#x3732;&#xd3ae;&#x61b7;&#x1bbb;&#x711c;&#x61ea;    objectField = java.lang.Object@73da669c    
                                                                                                calendarField = Sat Apr 30 14:05:21 BST 2011    
                                                                                                dateField = Sat Apr 30 14:05:21 BST 2011    
                                                                                                randomArray = [Ljava.util.Random;@786c730     )}    
        firstName = &#x3a9c;&#xb430;&#xcc04;&#x72c7;&#xbe0c;&#x7a4a;&#x53a3;&#xeec3;&#xd17e;&#xa9e0;     )
</pre></div>
<p>All three arguments to the Singleton method have been filled with data.</p></div></div>
<div class="section">
<h2>Generic classes<a name="Generic_classes"></a></h2>
<p>PODAM support classes with generic attributes by solving its currently generic types by the owner setter declaration.</p>
<div class="section">
<h3>Example<a name="Example"></a></h3>
<p>The following example illustrates a generic class, <i>uk.co.jemos.podam.test.dto.pdm45.GenericPojo&lt;F, S</i>&gt;, which is used several times as attributes of another POJO, <i>uk.co.jemos.podam.test.dto.pdm45.GenericAttributePojo</i>.</p>
<div class="source">
<pre>package uk.co.jemos.podam.test.dto.pdm45;

import java.util.Arrays;
import java.util.List;
import java.util.Map;

/**
 * Generic Pojo.
 * 
 * @author marciocarmona
 * 
 * @param &lt;F&gt;
 *            the first generic type
 * @param &lt;S&gt;
 *            the second generic type
 */
public class GenericPojo&lt;F, S&gt; {

        private F firstValue;
        private S secondValue;
        @PodamCollection(nbrElements = 2)
        private List&lt;F&gt; firstList;
        @PodamCollection(nbrElements = 2)
        private S[] secondArray;
        @PodamCollection(nbrElements = 2)
        private Map&lt;F, S&gt; firstSecondMap;

        public F getFirstValue() {
                return firstValue;
        }

        public void setFirstValue(F firstValue) {
                this.firstValue = firstValue;
        }

        public S getSecondValue() {
                return secondValue;
        }

        public void setSecondValue(S secondValue) {
                this.secondValue = secondValue;
        }

        public List&lt;F&gt; getFirstList() {
                return firstList;
        }

        public void setFirstList(List&lt;F&gt; firstList) {
                this.firstList = firstList;
        }

        public S[] getSecondArray() {
                return secondArray;
        }

        public void setSecondArray(S[] secondArray) {
                this.secondArray = secondArray;
        }

        public Map&lt;F, S&gt; getFirstSecondMap() {
                return firstSecondMap;
        }

        public void setFirstSecondMap(Map&lt;F, S&gt; firstSecondMap) {
                this.firstSecondMap = firstSecondMap;
        }

        @Override
        public String toString() {
                return &quot;GenericPojo [firstValue=&quot; + firstValue + &quot;, secondValue=&quot;
                                + secondValue + &quot;, firstList=&quot; + firstList + &quot;, secondArray=&quot;
                                + Arrays.toString(secondArray) + &quot;, firstSecondMap=&quot;
                                + firstSecondMap + &quot;]&quot;;
        }
}

</pre></div>
<p>Notice all the generic types (<i>F</i> and <i>S</i>) used by the class attributes, for each instance of this class we may use different types. It is very important to use the generic notation on the setters because this is where the current types are solved to create the instance that will be supplied for the setter.</p>
<p>Now this is a POJO using the generic class as an attribute, defining <i>F</i> and <i>S</i> as <i>String</i> and <i>Long</i> respectively.</p>
<div class="source">
<pre>package uk.co.jemos.podam.test.dto.pdm45;

/**
 * Pojo with generic attribute.
 * 
 * @author marciocarmona
 *
 */
public class GenericAttributePojo {

        private GenericPojo&lt;String, Long&gt; genericPojo;

        public GenericPojo&lt;String, Long&gt; getGenericPojo() {
                return genericPojo;
        }

        public void setGenericPojo(GenericPojo&lt;String, Long&gt; genericPojo) {
                this.genericPojo = genericPojo;
        }

        @Override
        public String toString() {
                return &quot;GenericAttributePojo [genericPojo=&quot; + genericPojo + &quot;]&quot;;
        }
}
</pre></div>
<p>As before, it is necessary to specify the types to be used on the setter, because these will be the types used during the generic class instantiation.</p>
<p>Running the test on the class above produces the following result:</p>
<div class="source">
<pre>GenericAttributePojo [
    genericPojo=GenericPojo [
        firstValue=mJdAWTgzkv,
        secondValue=1340162143705,
        firstList=[EMZeLCj8qf, VJZbWl8Xyo],
        secondArray=[1340162143705, 1340162143705],
        firstSecondMap={sSb8TCcOZB=1340162143700, EqVTVO78RR=1340162143700}
    ]
]
</pre></div>
<p>As you can notice all the generic types have been solved properly as <i>String</i> or <i>Long</i> according to the types defined on <i>GenericAttributePojo</i> class. Also the collections, the array and the map have 2 items as specified by the <i>@PodamCollection</i> annotation.</p>
<p>If you want to manufacture a generic class directly, i.e., that is not wrapped by a non-generic class like on the example above, please refer to &quot;Manufacturing generic types&quot; section in the <a href="./index.html"> Introduction</a> page.</p></div></div>
<div class="section">
<h2>External factory<a name="External_factory"></a></h2>
<p>There are some classes for which PODAM is not able to instantiate an object. Typically these classes are not POJOs, but require sophisticate instantiation. PODAM will leave values for such classes as null, but you still can manufacture them with second level factory registered to the PODAM factory.</p>
<div class="section">
<h3>Example<a name="Example"></a></h3>
<p>Define your own external factory implementing <i>PodamFactory</i> interface.</p>
<div class="source">
<pre>package uk.co.jemos.podam.example;

/**
 * External factory
 */
public class MyExternalFactory implements PodamFactory {

        private static final Logger LOG = LoggerFactory
                        .getLogger(MyExternalFactory.class);

        private static final Type[] NO_TYPES = new Type[0];

        @Override
        public &lt;T&gt; T manufacturePojo(Class&lt;T&gt; pojoClass) {
                return this.manufacturePojo(pojoClass, NO_TYPES);
        }

        @Override
        public &lt;T&gt; T manufacturePojo(Class&lt;T&gt; pojoClass, Type... genericTypeArgs) {
                if (pojoClass.equals(InputStream.class)) {
                        byte[] buffer = new byte[256];
                        @SuppressWarnings(&quot;unchecked&quot;)
                        T result = (T) new ByteArrayInputStream(buffer);
                        return result;
                } else {
                        LOG.warn(&quot;Cannot instantiate {} with arguments {}. Returning null.&quot;,
                                        pojoClass, Arrays.toString(genericTypeArgs));
                        return null;
                }
        }

        @Override
        public DataProviderStrategy getStrategy() {
                return null;
        }
}
</pre></div>
<p>Set the external factory, when instantiation PODAM factory.</p>
<div class="source">
<pre>PodamFactory factory = new PodamFactoryImpl(externalFactory);
InputStream pojo = factory.manufacturePojo(InputStream.class);
</pre></div>
<p><i>InputStream</i> class was given just for an example.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2023.
          All Rights Reserved.      
                    
                 <span id="publishDate">Last Published: 29-07-2023</span>
                        </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
